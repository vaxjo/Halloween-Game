@model Team
@{ ViewBag.Title = Model.name;
    ViewBag.BodyStyle = "css-" + Model.id; }

@* this is the kiosk page *@

@section scripts {
    <script>
        $(document).ready(function () {
            $('.carousel').carousel();

            var taskUpdater = setInterval(GetStatus, 3000);
        });

        function GetStatus() {
            $.get("/Central/GetStatus", function (status) {
                if (status.state != "@Halloween_Game.Session.CurrentSession.State.ToString()" || status.code != "@Halloween_Game.Session.CurrentSession.Code") window.location = window.location;
            });
        }
    </script>
}

<style>
    .history { border: 2px solid #fff; border-radius: 5px; margin: 30px 10px 80px 10px; padding: 15px 0; text-align: left; font-size: 1.4em; }
        .history .year { font-size: 1.4em; }
</style>

<div class="text-center" style="color: #fff; margin-top:100px;">

    <!-- this is here so that we can scroll down a bit and make the url bar dissappear in a tablet browser -->
    <div style="height:400px;"></div>

    <h1 class="font-@Model.id" style="margin-bottom:30px;">@Model.name</h1>

    <div class="text-center" style="margin-bottom:30px;"><img src="~/Content/logo bw @(Model.id).png" class="" /></div>

    <p style="font-size:1.3em;  text-align: justify;">@Model.description</p>
    <hr />
    <p style="font-size:1.5em;" >To join this faction, enter this url in your mobile device's browser and then enter the four-digit code below.</p>

    <h2>http://@(Request.Url.Authority)/</h2>

    <h2><code>@Model.JoinCode</code></h2>

    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="5500" style="margin-top: 40px;">
        <div class="carousel-inner" role="listbox">
            @{ bool active = false; }
            @foreach (string line in System.IO.File.ReadAllLines(Server.MapPath("~/App_Data/" + Model.id + " history.txt"))) {
                <div class="item @(!active ? "active" : "")">
                    <div class="row history">
                        <div class="col-xs-3 font-@(Model.id) year">@line.Split(',')[0]</div>
                        <div class="col-xs-9">@line.Split(new char[] { ',' }, 2)[1]</div>
                    </div>
                </div>
                active = true;
            }
        </div>
    </div>

    <div style="height:40px;"></div>

</div>

